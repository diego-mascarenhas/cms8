!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(self,(function(){return e={10046:function(e,t){var i,n,a,l;function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}l=function(e){"use strict";function t(e){for(var t=e.length,i=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],n=0,a=0;t--;)a+=i[n][parseInt(e.charAt(t),10)],n=1-n;return a%10==0&&a>0}var i={luhn:t,mod11And10:function(e){for(var t=e.length,i=5,n=0;n<t;n++)i=(2*(i||10)%11+parseInt(e.charAt(n),10))%10;return 1===i},mod37And36:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=e.length,n=t.length,a=Math.floor(n/2),l=0;l<i;l++)a=(2*(a||n)%(n+1)+t.indexOf(e.charAt(l)))%n;return 1===a},verhoeff:function(e){for(var t=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],i=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],n=e.reverse(),a=0,l=0;l<n.length;l++)a=t[a][i[l%8][n[l]]];return 0===a}};function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=d(e);if(t){var a=d(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,i)}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function v(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return h(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){s=!0,l=e},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw l}}}}function m(e,t,i,n){var a=(i.getAttribute("type")||"").toLowerCase(),l=i.tagName.toLowerCase();if("textarea"===l)return i.value;if("select"===l){var r=i,s=r.selectedIndex;return s>=0?r.options.item(s).value:""}if("input"===l){if("radio"===a||"checkbox"===a){var o=n.filter((function(e){return e.checked})).length;return 0===o?"":o+""}return i.value}return""}function p(e,t){var i=Array.isArray(t)?t:[t],n=e;return i.forEach((function(e){n=n.replace("%s",e)})),n}function g(e,t){if("function"==typeof e)return e.apply(this,t);if("string"==typeof e){var i=e;"()"===i.substring(i.length-2)&&(i=i.substring(0,i.length-2));var n,a=i.split("."),l=a.pop(),r=window,s=v(a);try{for(s.s();!(n=s.n()).done;)r=r[n.value]}catch(e){s.e(e)}finally{s.f()}return void 0===r[l]?null:r[l].apply(this,t)}}var b={AMERICAN_EXPRESS:{length:[15],prefix:["34","37"]},DANKORT:{length:[16],prefix:["5019"]},DINERS_CLUB:{length:[14],prefix:["300","301","302","303","304","305","36"]},DINERS_CLUB_US:{length:[16],prefix:["54","55"]},DISCOVER:{length:[16],prefix:["6011","622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925","644","645","646","647","648","649","65"]},ELO:{length:[16],prefix:["4011","4312","4389","4514","4573","4576","5041","5066","5067","509","6277","6362","6363","650","6516","6550"]},FORBRUGSFORENINGEN:{length:[16],prefix:["600722"]},JCB:{length:[16],prefix:["3528","3529","353","354","355","356","357","358"]},LASER:{length:[16,17,18,19],prefix:["6304","6706","6771","6709"]},MAESTRO:{length:[12,13,14,15,16,17,18,19],prefix:["5018","5020","5038","5868","6304","6759","6761","6762","6763","6764","6765","6766"]},MASTERCARD:{length:[16],prefix:["51","52","53","54","55"]},SOLO:{length:[16,18,19],prefix:["6334","6767"]},UNIONPAY:{length:[16,17,18,19],prefix:["622126","622127","622128","622129","62213","62214","62215","62216","62217","62218","62219","6222","6223","6224","6225","6226","6227","6228","62290","62291","622920","622921","622922","622923","622924","622925"]},VISA:{length:[16],prefix:["4"]},VISA_ELECTRON:{length:[16],prefix:["4026","417500","4405","4508","4844","4913","4917"]}};function y(e,t,i,n){if(isNaN(e)||isNaN(t)||isNaN(i))return!1;if(e<1e3||e>9999||t<=0||t>12)return!1;if(i<=0||i>[31,e%400==0||e%100!=0&&e%4==0?29:28,31,30,31,30,31,31,30,31,30,31][t-1])return!1;if(!0===n){var a=new Date,l=a.getFullYear(),r=a.getMonth(),s=a.getDate();return e<l||e===l&&t-1<r||e===l&&t-1===r&&i<s}return!0}var E=function(e){return Array(e).fill("").map((function(e){return Math.random().toString(36).charAt(2)})).join("")};function k(e,t){return new Promise((function(i,n){var a=Object.assign({},{crossDomain:!1,headers:{},method:"GET",params:{}},t),l=Object.keys(a.params).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(a.params[e]))})).join("&"),r=e.indexOf("?"),s="GET"===a.method?"".concat(e).concat(r?"?":"&").concat(l):e;if(a.crossDomain){var o=document.createElement("script"),d="___FormValidationFetch_".concat(E(12),"___");window[d]=function(e){delete window[d],i(e)},o.src="".concat(s).concat(r?"&":"?","callback=").concat(d),o.async=!0,o.addEventListener("load",(function(){o.parentNode.removeChild(o)})),o.addEventListener("error",(function(){return n})),document.head.appendChild(o)}else{var c=new XMLHttpRequest;c.open(a.method,s),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"===a.method&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),Object.keys(a.headers).forEach((function(e){return c.setRequestHeader(e,a.headers[e])})),c.addEventListener("load",(function(){i(JSON.parse(this.responseText))})),c.addEventListener("error",(function(){return n})),c.send(function(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}(a.params))}}))}var V={between:function(){var e=function(e){return parseFloat("".concat(e).replace(",","."))};return{validate:function(t){var i=t.value;if(""===i)return{valid:!0};var n=Object.assign({},{inclusive:!0,message:""},t.options),a=e(n.min),l=e(n.max);return n.inclusive?{message:p(t.l10n?n.message||t.l10n.between.default:n.message,["".concat(a),"".concat(l)]),valid:parseFloat(i)>=a&&parseFloat(i)<=l}:{message:p(t.l10n?n.message||t.l10n.between.notInclusive:n.message,["".concat(a),"".concat(l)]),valid:parseFloat(i)>a&&parseFloat(i)<l}}}},blank:function(){return{validate:function(e){return{valid:!0}}}},callback:function(){return{validate:function(e){var t=g(e.options.callback,[e]);return"boolean"==typeof t?{valid:t}:t}}},choice:function(){return{validate:function(e){var t="select"===e.element.tagName.toLowerCase()?e.element.querySelectorAll("option:checked").length:e.elements.filter((function(e){return e.checked})).length,i=e.options.min?"".concat(e.options.min):"",n=e.options.max?"".concat(e.options.max):"",a=e.l10n?e.options.message||e.l10n.choice.default:e.options.message,l=!(i&&t<parseInt(i,10)||n&&t>parseInt(n,10));switch(!0){case!!i&&!!n:a=p(e.l10n?e.l10n.choice.between:e.options.message,[i,n]);break;case!!i:a=p(e.l10n?e.l10n.choice.more:e.options.message,i);break;case!!n:a=p(e.l10n?e.l10n.choice.less:e.options.message,n)}return{message:a,valid:l}}}},creditCard:function(){return{validate:function(e){if(""===e.value)return{meta:{type:null},valid:!0};if(/[^0-9-\s]+/.test(e.value))return{meta:{type:null},valid:!1};var i=e.value.replace(/\D/g,"");if(!t(i))return{meta:{type:null},valid:!1};for(var n=0,a=Object.keys(b);n<a.length;n++){var l=a[n];for(var r in b[l].prefix)if(e.value.substr(0,b[l].prefix[r].length)===b[l].prefix[r]&&-1!==b[l].length.indexOf(i.length))return{meta:{type:l},valid:!0}}return{meta:{type:null},valid:!1}}}},date:function(){var e=function(e,t,i){var n=t.indexOf("YYYY"),a=t.indexOf("MM"),l=t.indexOf("DD");if(-1===n||-1===a||-1===l)return null;var r=e.split(" "),s=r[0].split(i);if(s.length<3)return null;var o=new Date(parseInt(s[n],10),parseInt(s[a],10)-1,parseInt(s[l],10));if(r.length>1){var d=r[1].split(":");o.setHours(d.length>0?parseInt(d[0],10):0),o.setMinutes(d.length>1?parseInt(d[1],10):0),o.setSeconds(d.length>2?parseInt(d[2],10):0)}return o},t=function(e,t){var i=t.replace(/Y/g,"y").replace(/M/g,"m").replace(/D/g,"d").replace(/:m/g,":M").replace(/:mm/g,":MM").replace(/:S/,":s").replace(/:SS/,":ss"),n=e.getDate(),a=n<10?"0".concat(n):n,l=e.getMonth()+1,r=l<10?"0".concat(l):l,s="".concat(e.getFullYear()).substr(2),o=e.getFullYear(),d=e.getHours()%12||12,c=d<10?"0".concat(d):d,u=e.getHours(),f=u<10?"0".concat(u):u,h=e.getMinutes(),v=h<10?"0".concat(h):h,m=e.getSeconds(),p=m<10?"0".concat(m):m,g={H:"".concat(u),HH:"".concat(f),M:"".concat(h),MM:"".concat(v),d:"".concat(n),dd:"".concat(a),h:"".concat(d),hh:"".concat(c),m:"".concat(l),mm:"".concat(r),s:"".concat(m),ss:"".concat(p),yy:"".concat(s),yyyy:"".concat(o)};return i.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMs])\1?|"[^"]*"|'[^']*'/g,(function(e){return g[e]?g[e]:e.slice(1,e.length-1)}))};return{validate:function(i){if(""===i.value)return{meta:{date:null},valid:!0};var n=Object.assign({},{format:i.element&&"date"===i.element.getAttribute("type")?"YYYY-MM-DD":"MM/DD/YYYY",message:""},i.options),a=i.l10n?i.l10n.date.default:n.message,l={message:"".concat(a),meta:{date:null},valid:!1},r=n.format.split(" "),s=r.length>1?r[1]:null,o=r.length>2?r[2]:null,d=i.value.split(" "),c=d[0],u=d.length>1?d[1]:null;if(r.length!==d.length)return l;var f=n.separator||(-1!==c.indexOf("/")?"/":-1!==c.indexOf("-")?"-":-1!==c.indexOf(".")?".":"/");if(null===f||-1===c.indexOf(f))return l;var h=c.split(f),v=r[0].split(f);if(h.length!==v.length)return l;var m=h[v.indexOf("YYYY")],g=h[v.indexOf("MM")],b=h[v.indexOf("DD")];if(!/^\d+$/.test(m)||!/^\d+$/.test(g)||!/^\d+$/.test(b)||m.length>4||g.length>2||b.length>2)return l;var E=parseInt(m,10),k=parseInt(g,10),V=parseInt(b,10);if(!y(E,k,V))return l;var F=new Date(E,k-1,V);if(s){var A=u.split(":");if(s.split(":").length!==A.length)return l;var x=A.length>0?A[0].length<=2&&/^\d+$/.test(A[0])?parseInt(A[0],10):-1:0,w=A.length>1?A[1].length<=2&&/^\d+$/.test(A[1])?parseInt(A[1],10):-1:0,H=A.length>2?A[2].length<=2&&/^\d+$/.test(A[2])?parseInt(A[2],10):-1:0;if(-1===x||-1===w||-1===H)return l;if(H<0||H>60)return l;if(x<0||x>=24||o&&x>12)return l;if(w<0||w>59)return l;F.setHours(x),F.setMinutes(w),F.setSeconds(H)}var I="function"==typeof n.min?n.min():n.min,C=I instanceof Date?I:I?e(I,v,f):F,O="function"==typeof n.max?n.max():n.max,S=O instanceof Date?O:O?e(O,v,f):F,N=I instanceof Date?t(C,n.format):I,j=O instanceof Date?t(S,n.format):O;switch(!0){case!!N&&!j:return{message:p(i.l10n?i.l10n.date.min:a,N),meta:{date:F},valid:F.getTime()>=C.getTime()};case!!j&&!N:return{message:p(i.l10n?i.l10n.date.max:a,j),meta:{date:F},valid:F.getTime()<=S.getTime()};case!!j&&!!N:return{message:p(i.l10n?i.l10n.date.range:a,[N,j]),meta:{date:F},valid:F.getTime()<=S.getTime()&&F.getTime()>=C.getTime()};default:return{message:"".concat(a),meta:{date:F},valid:!0}}}}},different:function(){return{validate:function(e){var t="function"==typeof e.options.compare?e.options.compare.call(this):e.options.compare;return{valid:""===t||e.value!==t}}}},digits:function(){return{validate:function(e){return{valid:""===e.value||/^\d+$/.test(e.value)}}}},emailAddress:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{multiple:!1,separator:/[,;]/},e.options),i=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;if(!0===t.multiple||"true"==="".concat(t.multiple)){for(var n=t.separator||/[,;]/,a=function(e,t){for(var i=e.split(/"/),n=i.length,a=[],l="",r=0;r<n;r++)if(r%2==0){var s=i[r].split(t),o=s.length;if(1===o)l+=s[0];else{a.push(l+s[0]);for(var d=1;d<o-1;d++)a.push(s[d]);l=s[o-1]}}else l+='"'+i[r],r<n-1&&(l+='"');return a.push(l),a}(e.value,n),l=a.length,r=0;r<l;r++)if(!i.test(a[r]))return{valid:!1};return{valid:!0}}return{valid:i.test(e.value)}}}},file:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t,i=e.options.extension?e.options.extension.toLowerCase().split(","):null,n=e.options.type?e.options.type.toLowerCase().split(","):null;if(window.File&&window.FileList&&window.FileReader){var a=e.element.files,l=a.length,r=0;if(e.options.maxFiles&&l>parseInt("".concat(e.options.maxFiles),10))return{meta:{error:"INVALID_MAX_FILES"},valid:!1};if(e.options.minFiles&&l<parseInt("".concat(e.options.minFiles),10))return{meta:{error:"INVALID_MIN_FILES"},valid:!1};for(var s={},o=0;o<l;o++){if(r+=a[o].size,s={ext:t=a[o].name.substr(a[o].name.lastIndexOf(".")+1),file:a[o],size:a[o].size,type:a[o].type},e.options.minSize&&a[o].size<parseInt("".concat(e.options.minSize),10))return{meta:Object.assign({},{error:"INVALID_MIN_SIZE"},s),valid:!1};if(e.options.maxSize&&a[o].size>parseInt("".concat(e.options.maxSize),10))return{meta:Object.assign({},{error:"INVALID_MAX_SIZE"},s),valid:!1};if(i&&-1===i.indexOf(t.toLowerCase()))return{meta:Object.assign({},{error:"INVALID_EXTENSION"},s),valid:!1};if(a[o].type&&n&&-1===n.indexOf(a[o].type.toLowerCase()))return{meta:Object.assign({},{error:"INVALID_TYPE"},s),valid:!1}}if(e.options.maxTotalSize&&r>parseInt("".concat(e.options.maxTotalSize),10))return{meta:Object.assign({},{error:"INVALID_MAX_TOTAL_SIZE",totalSize:r},s),valid:!1};if(e.options.minTotalSize&&r<parseInt("".concat(e.options.minTotalSize),10))return{meta:Object.assign({},{error:"INVALID_MIN_TOTAL_SIZE",totalSize:r},s),valid:!1}}else if(t=e.value.substr(e.value.lastIndexOf(".")+1),i&&-1===i.indexOf(t.toLowerCase()))return{meta:{error:"INVALID_EXTENSION",ext:t},valid:!1};return{valid:!0}}}},greaterThan:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{inclusive:!0,message:""},e.options),i=parseFloat("".concat(t.min).replace(",","."));return t.inclusive?{message:p(e.l10n?t.message||e.l10n.greaterThan.default:t.message,"".concat(i)),valid:parseFloat(e.value)>=i}:{message:p(e.l10n?t.message||e.l10n.greaterThan.notInclusive:t.message,"".concat(i)),valid:parseFloat(e.value)>i}}}},identical:function(){return{validate:function(e){var t="function"==typeof e.options.compare?e.options.compare.call(this):e.options.compare;return{valid:""===t||e.value===t}}}},integer:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{decimalSeparator:".",thousandsSeparator:""},e.options),i="."===t.decimalSeparator?"\\.":t.decimalSeparator,n="."===t.thousandsSeparator?"\\.":t.thousandsSeparator,a=new RegExp("^-?[0-9]{1,3}(".concat(n,"[0-9]{3})*(").concat(i,"[0-9]+)?$")),l=new RegExp(n,"g"),r="".concat(e.value);if(!a.test(r))return{valid:!1};n&&(r=r.replace(l,"")),i&&(r=r.replace(i,"."));var s=parseFloat(r);return{valid:!isNaN(s)&&isFinite(s)&&Math.floor(s)===s}}}},ip:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{ipv4:!0,ipv6:!0},e.options),i=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\/([0-9]|[1-2][0-9]|3[0-2]))?$/,n=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*(\/(\d|\d\d|1[0-1]\d|12[0-8]))?$/;switch(!0){case t.ipv4&&!t.ipv6:return{message:e.l10n?t.message||e.l10n.ip.ipv4:t.message,valid:i.test(e.value)};case!t.ipv4&&t.ipv6:return{message:e.l10n?t.message||e.l10n.ip.ipv6:t.message,valid:n.test(e.value)};case t.ipv4&&t.ipv6:default:return{message:e.l10n?t.message||e.l10n.ip.default:t.message,valid:i.test(e.value)||n.test(e.value)}}}}},lessThan:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{inclusive:!0,message:""},e.options),i=parseFloat("".concat(t.max).replace(",","."));return t.inclusive?{message:p(e.l10n?t.message||e.l10n.lessThan.default:t.message,"".concat(i)),valid:parseFloat(e.value)<=i}:{message:p(e.l10n?t.message||e.l10n.lessThan.notInclusive:t.message,"".concat(i)),valid:parseFloat(e.value)<i}}}},notEmpty:function(){return{validate:function(e){var t=!!e.options&&!!e.options.trim,i=e.value;return{valid:!t&&""!==i||t&&""!==i&&""!==i.trim()}}}},numeric:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{decimalSeparator:".",thousandsSeparator:""},e.options),i="".concat(e.value);i.substr(0,1)===t.decimalSeparator?i="0".concat(t.decimalSeparator).concat(i.substr(1)):i.substr(0,2)==="-".concat(t.decimalSeparator)&&(i="-0".concat(t.decimalSeparator).concat(i.substr(2)));var n="."===t.decimalSeparator?"\\.":t.decimalSeparator,a="."===t.thousandsSeparator?"\\.":t.thousandsSeparator,l=new RegExp("^-?[0-9]{1,3}(".concat(a,"[0-9]{3})*(").concat(n,"[0-9]+)?$")),r=new RegExp(a,"g");if(!l.test(i))return{valid:!1};a&&(i=i.replace(r,"")),n&&(i=i.replace(n,"."));var s=parseFloat(i);return{valid:!isNaN(s)&&isFinite(s)}}}},promise:function(){return{validate:function(e){return g(e.options.promise,[e])}}},regexp:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=e.options.regexp;if(t instanceof RegExp)return{valid:t.test(e.value)};var i=t.toString();return{valid:(e.options.flags?new RegExp(i,e.options.flags):new RegExp(i)).test(e.value)}}}},remote:function(){var e={crossDomain:!1,data:{},headers:{},method:"GET",validKey:"valid"};return{validate:function(t){if(""===t.value)return Promise.resolve({valid:!0});var i=Object.assign({},e,t.options),n=i.data;return"function"==typeof i.data&&(n=i.data.call(this,t)),"string"==typeof n&&(n=JSON.parse(n)),n[i.name||t.field]=t.value,k("function"==typeof i.url?i.url.call(this,t):i.url,{crossDomain:i.crossDomain,headers:i.headers,method:i.method,params:n}).then((function(e){return Promise.resolve({message:e.message,meta:e,valid:"true"==="".concat(e[i.validKey])})})).catch((function(e){return Promise.reject({valid:!1})}))}}},stringCase:function(){return{validate:function(e){if(""===e.value)return{valid:!0};var t=Object.assign({},{case:"lower"},e.options),i=(t.case||"lower").toLowerCase();return{message:t.message||(e.l10n?"upper"===i?e.l10n.stringCase.upper:e.l10n.stringCase.default:t.message),valid:"upper"===i?e.value===e.value.toUpperCase():e.value===e.value.toLowerCase()}}}},stringLength:function(){return{validate:function(e){var t=Object.assign({},{message:"",trim:!1,utf8Bytes:!1},e.options),i=!0===t.trim||"true"==="".concat(t.trim)?e.value.trim():e.value;if(""===i)return{valid:!0};var n=t.min?"".concat(t.min):"",a=t.max?"".concat(t.max):"",l=t.utf8Bytes?function(e){for(var t=e.length,i=e.length-1;i>=0;i--){var n=e.charCodeAt(i);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&i--}return"".concat(t)}(i):i.length,r=!0,s=e.l10n?t.message||e.l10n.stringLength.default:t.message;switch((n&&l<parseInt(n,10)||a&&l>parseInt(a,10))&&(r=!1),!0){case!!n&&!!a:s=p(e.l10n?t.message||e.l10n.stringLength.between:t.message,[n,a]);break;case!!n:s=p(e.l10n?t.message||e.l10n.stringLength.more:t.message,"".concat(parseInt(n,10)));break;case!!a:s=p(e.l10n?t.message||e.l10n.stringLength.less:t.message,"".concat(parseInt(a,10)))}return{message:s,valid:r}}}},uri:function(){var e={allowEmptyProtocol:!1,allowLocal:!1,protocol:"http, https, ftp"};return{validate:function(t){if(""===t.value)return{valid:!0};var i=Object.assign({},e,t.options),n=!0===i.allowLocal||"true"==="".concat(i.allowLocal),a=!0===i.allowEmptyProtocol||"true"==="".concat(i.allowEmptyProtocol),l=i.protocol.split(",").join("|").replace(/\s/g,"");return{valid:new RegExp("^(?:(?:"+l+")://)"+(a?"?":"")+"(?:\\S+(?::\\S*)?@)?(?:"+(n?"":"(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})")+"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9])*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))"+(n?"?":"")+")(?::\\d{2,5})?(?:/[^\\s]*)?$","i").test(t.value)}}}}},F=function(){function e(t,i){n(this,e),this.elements={},this.ee={fns:{},clear:function(){this.fns={}},emit:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];(this.fns[e]||[]).map((function(e){return e.apply(e,i)}))},off:function(e,t){if(this.fns[e]){var i=this.fns[e].indexOf(t);i>=0&&this.fns[e].splice(i,1)}},on:function(e,t){(this.fns[e]=this.fns[e]||[]).push(t)}},this.filter={filters:{},add:function(e,t){(this.filters[e]=this.filters[e]||[]).push(t)},clear:function(){this.filters={}},execute:function(e,t,i){if(!this.filters[e]||!this.filters[e].length)return t;for(var n=t,a=this.filters[e],l=a.length,r=0;r<l;r++)n=a[r].apply(n,i);return n},remove:function(e,t){this.filters[e]&&(this.filters[e]=this.filters[e].filter((function(e){return e!==t})))}},this.plugins={},this.results=new Map,this.validators={},this.form=t,this.fields=i}return l(e,[{key:"on",value:function(e,t){return this.ee.on(e,t),this}},{key:"off",value:function(e,t){return this.ee.off(e,t),this}},{key:"emit",value:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return(t=this.ee).emit.apply(t,[e].concat(n)),this}},{key:"registerPlugin",value:function(e,t){if(this.plugins[e])throw new Error("The plguin ".concat(e," is registered"));return t.setCore(this),t.install(),this.plugins[e]=t,this}},{key:"deregisterPlugin",value:function(e){var t=this.plugins[e];return t&&t.uninstall(),delete this.plugins[e],this}},{key:"registerValidator",value:function(e,t){if(this.validators[e])throw new Error("The validator ".concat(e," is registered"));return this.validators[e]=t,this}},{key:"registerFilter",value:function(e,t){return this.filter.add(e,t),this}},{key:"deregisterFilter",value:function(e,t){return this.filter.remove(e,t),this}},{key:"executeFilter",value:function(e,t,i){return this.filter.execute(e,t,i)}},{key:"addField",value:function(e,t){var i=Object.assign({},{selector:"",validators:{}},t);return this.fields[e]=this.fields[e]?{selector:i.selector||this.fields[e].selector,validators:Object.assign({},this.fields[e].validators,i.validators)}:i,this.elements[e]=this.queryElements(e),this.emit("core.field.added",{elements:this.elements[e],field:e,options:this.fields[e]}),this}},{key:"removeField",value:function(e){if(!this.fields[e])throw new Error("The field ".concat(e," validators are not defined. Please ensure the field is added first"));var t=this.elements[e],i=this.fields[e];return delete this.elements[e],delete this.fields[e],this.emit("core.field.removed",{elements:t,field:e,options:i}),this}},{key:"validate",value:function(){var e=this;return this.emit("core.form.validating",{formValidation:this}),this.filter.execute("validate-pre",Promise.resolve(),[]).then((function(){return Promise.all(Object.keys(e.fields).map((function(t){return e.validateField(t)}))).then((function(t){switch(!0){case-1!==t.indexOf("Invalid"):return e.emit("core.form.invalid",{formValidation:e}),Promise.resolve("Invalid");case-1!==t.indexOf("NotValidated"):return e.emit("core.form.notvalidated",{formValidation:e}),Promise.resolve("NotValidated");default:return e.emit("core.form.valid",{formValidation:e}),Promise.resolve("Valid")}}))}))}},{key:"validateField",value:function(e){var t=this,i=this.results.get(e);if("Valid"===i||"Invalid"===i)return Promise.resolve(i);this.emit("core.field.validating",e);var n=this.elements[e];if(0===n.length)return this.emit("core.field.valid",e),Promise.resolve("Valid");var a=n[0].getAttribute("type");return"radio"===a||"checkbox"===a||1===n.length?this.validateElement(e,n[0]):Promise.all(n.map((function(i){return t.validateElement(e,i)}))).then((function(i){switch(!0){case-1!==i.indexOf("Invalid"):return t.emit("core.field.invalid",e),t.results.set(e,"Invalid"),Promise.resolve("Invalid");case-1!==i.indexOf("NotValidated"):return t.emit("core.field.notvalidated",e),t.results.delete(e),Promise.resolve("NotValidated");default:return t.emit("core.field.valid",e),t.results.set(e,"Valid"),Promise.resolve("Valid")}}))}},{key:"validateElement",value:function(e,t){var i=this;this.results.delete(e);var n=this.elements[e];if(this.filter.execute("element-ignored",!1,[e,t,n]))return this.emit("core.element.ignored",{element:t,elements:n,field:e}),Promise.resolve("Ignored");var a=this.fields[e].validators;this.emit("core.element.validating",{element:t,elements:n,field:e});var l=Object.keys(a).map((function(n){return function(){return i.executeValidator(e,t,n,a[n])}}));return this.waterfall(l).then((function(a){var l=-1===a.indexOf("Invalid");i.emit("core.element.validated",{element:t,elements:n,field:e,valid:l});var r=t.getAttribute("type");return"radio"!==r&&"checkbox"!==r&&1!==n.length||i.emit(l?"core.field.valid":"core.field.invalid",e),Promise.resolve(l?"Valid":"Invalid")})).catch((function(a){return i.emit("core.element.notvalidated",{element:t,elements:n,field:e}),Promise.resolve(a)}))}},{key:"executeValidator",value:function(e,t,i,n){var a=this,l=this.elements[e],r=this.filter.execute("validator-name",i,[i,e]);if(n.message=this.filter.execute("validator-message",n.message,[this.locale,e,r]),!this.validators[r]||!1===n.enabled)return this.emit("core.validator.validated",{element:t,elements:l,field:e,result:this.normalizeResult(e,r,{valid:!0}),validator:r}),Promise.resolve("Valid");var s=this.validators[r],o=this.getElementValue(e,t,r);if(!this.filter.execute("field-should-validate",!0,[e,t,o,i]))return this.emit("core.validator.notvalidated",{element:t,elements:l,field:e,validator:i}),Promise.resolve("NotValidated");this.emit("core.validator.validating",{element:t,elements:l,field:e,validator:i});var d=s().validate({element:t,elements:l,field:e,l10n:this.localization,options:n,value:o});if("function"==typeof d.then)return d.then((function(n){var r=a.normalizeResult(e,i,n);return a.emit("core.validator.validated",{element:t,elements:l,field:e,result:r,validator:i}),r.valid?"Valid":"Invalid"}));var c=this.normalizeResult(e,i,d);return this.emit("core.validator.validated",{element:t,elements:l,field:e,result:c,validator:i}),Promise.resolve(c.valid?"Valid":"Invalid")}},{key:"getElementValue",value:function(e,t,i){var n=m(this.form,0,t,this.elements[e]);return this.filter.execute("field-value",n,[n,e,t,i])}},{key:"getElements",value:function(e){return this.elements[e]}},{key:"getFields",value:function(){return this.fields}},{key:"getFormElement",value:function(){return this.form}},{key:"getLocale",value:function(){return this.locale}},{key:"getPlugin",value:function(e){return this.plugins[e]}},{key:"updateFieldStatus",value:function(e,t,i){var n=this,a=this.elements[e],l=a[0].getAttribute("type");if(("radio"===l||"checkbox"===l?[a[0]]:a).forEach((function(a){return n.updateElementStatus(e,a,t,i)})),i)"Invalid"===t&&(this.emit("core.field.invalid",e),this.results.set(e,"Invalid"));else switch(t){case"NotValidated":this.emit("core.field.notvalidated",e),this.results.delete(e);break;case"Validating":this.emit("core.field.validating",e),this.results.delete(e);break;case"Valid":this.emit("core.field.valid",e),this.results.set(e,"Valid");break;case"Invalid":this.emit("core.field.invalid",e),this.results.set(e,"Invalid")}return this}},{key:"updateElementStatus",value:function(e,t,i,n){var a=this,l=this.elements[e],r=this.fields[e].validators,s=n?[n]:Object.keys(r);switch(i){case"NotValidated":s.forEach((function(i){return a.emit("core.validator.notvalidated",{element:t,elements:l,field:e,validator:i})})),this.emit("core.element.notvalidated",{element:t,elements:l,field:e});break;case"Validating":s.forEach((function(i){return a.emit("core.validator.validating",{element:t,elements:l,field:e,validator:i})})),this.emit("core.element.validating",{element:t,elements:l,field:e});break;case"Valid":s.forEach((function(i){return a.emit("core.validator.validated",{element:t,elements:l,field:e,result:{message:r[i].message,valid:!0},validator:i})})),this.emit("core.element.validated",{element:t,elements:l,field:e,valid:!0});break;case"Invalid":s.forEach((function(i){return a.emit("core.validator.validated",{element:t,elements:l,field:e,result:{message:r[i].message,valid:!1},validator:i})})),this.emit("core.element.validated",{element:t,elements:l,field:e,valid:!1})}return this}},{key:"resetForm",value:function(e){var t=this;return Object.keys(this.fields).forEach((function(i){return t.resetField(i,e)})),this.emit("core.form.reset",{formValidation:this,reset:e}),this}},{key:"resetField",value:function(e,t){if(t){var i=this.elements[e],n=i[0].getAttribute("type");i.forEach((function(e){"radio"===n||"checkbox"===n?(e.removeAttribute("selected"),e.removeAttribute("checked"),e.checked=!1):(e.setAttribute("value",""),(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(e.value=""))}))}return this.updateFieldStatus(e,"NotValidated"),this.emit("core.field.reset",{field:e,reset:t}),this}},{key:"revalidateField",value:function(e){return this.fields[e]?(this.updateFieldStatus(e,"NotValidated"),this.validateField(e)):Promise.resolve("Ignored")}},{key:"disableValidator",value:function(e,t){if(!this.fields[e])return this;var i=this.elements[e];return this.toggleValidator(!1,e,t),this.emit("core.validator.disabled",{elements:i,field:e,formValidation:this,validator:t}),this}},{key:"enableValidator",value:function(e,t){if(!this.fields[e])return this;var i=this.elements[e];return this.toggleValidator(!0,e,t),this.emit("core.validator.enabled",{elements:i,field:e,formValidation:this,validator:t}),this}},{key:"updateValidatorOption",value:function(e,t,i,n){return this.fields[e]&&this.fields[e].validators&&this.fields[e].validators[t]&&(this.fields[e].validators[t][i]=n),this}},{key:"setFieldOptions",value:function(e,t){return this.fields[e]=t,this}},{key:"destroy",value:function(){var e=this;return Object.keys(this.plugins).forEach((function(t){return e.plugins[t].uninstall()})),this.ee.clear(),this.filter.clear(),this.results.clear(),this.plugins={},this}},{key:"setLocale",value:function(e,t){return this.locale=e,this.localization=t,this}},{key:"waterfall",value:function(e){return e.reduce((function(e,t){return e.then((function(e){return t().then((function(t){return e.push(t),e}))}))}),Promise.resolve([]))}},{key:"queryElements",value:function(e){var t=this.fields[e].selector?"#"===this.fields[e].selector.charAt(0)?'[id="'.concat(this.fields[e].selector.substring(1),'"]'):this.fields[e].selector:'[name="'.concat(e,'"]');return[].slice.call(this.form.querySelectorAll(t))}},{key:"normalizeResult",value:function(e,t,i){var n=this.fields[e].validators[t];return Object.assign({},i,{message:i.message||(n?n.message:"")||(this.localization&&this.localization[t]&&this.localization[t].default?this.localization[t].default:"")||"The field ".concat(e," is not valid")})}},{key:"toggleValidator",value:function(e,t,i){var n=this,a=this.fields[t].validators;return i&&a&&a[i]?this.fields[t].validators[i].enabled=e:i||Object.keys(a).forEach((function(i){return n.fields[t].validators[i].enabled=e})),this.updateFieldStatus(t,"NotValidated",i)}}]),e}(),A=function(){function e(t){n(this,e),this.opts=t}return l(e,[{key:"setCore",value:function(e){return this.core=e,this}},{key:"install",value:function(){}},{key:"uninstall",value:function(){}}]),e}(),x={getFieldValue:m},w=function(e){o(i,e);var t=f(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).opts=e||{},a.validatorNameFilter=a.getValidatorName.bind(u(a)),a}return l(i,[{key:"install",value:function(){this.core.registerFilter("validator-name",this.validatorNameFilter)}},{key:"uninstall",value:function(){this.core.deregisterFilter("validator-name",this.validatorNameFilter)}},{key:"getValidatorName",value:function(e,t){return this.opts[e]||e}}]),i}(A),H=function(e){o(i,e);var t=f(i);function i(){var e;return n(this,i),(e=t.call(this,{})).elementValidatedHandler=e.onElementValidated.bind(u(e)),e.fieldValidHandler=e.onFieldValid.bind(u(e)),e.fieldInvalidHandler=e.onFieldInvalid.bind(u(e)),e.messageDisplayedHandler=e.onMessageDisplayed.bind(u(e)),e}return l(i,[{key:"install",value:function(){this.core.on("core.field.valid",this.fieldValidHandler).on("core.field.invalid",this.fieldInvalidHandler).on("core.element.validated",this.elementValidatedHandler).on("plugins.message.displayed",this.messageDisplayedHandler)}},{key:"uninstall",value:function(){this.core.off("core.field.valid",this.fieldValidHandler).off("core.field.invalid",this.fieldInvalidHandler).off("core.element.validated",this.elementValidatedHandler).off("plugins.message.displayed",this.messageDisplayedHandler)}},{key:"onElementValidated",value:function(e){e.valid&&(e.element.setAttribute("aria-invalid","false"),e.element.removeAttribute("aria-describedby"))}},{key:"onFieldValid",value:function(e){var t=this.core.getElements(e);t&&t.forEach((function(e){e.setAttribute("aria-invalid","false"),e.removeAttribute("aria-describedby")}))}},{key:"onFieldInvalid",value:function(e){var t=this.core.getElements(e);t&&t.forEach((function(e){return e.setAttribute("aria-invalid","true")}))}},{key:"onMessageDisplayed",value:function(e){e.messageElement.setAttribute("role","alert"),e.messageElement.setAttribute("aria-hidden","false");var t=this.core.getElements(e.field),i=t.indexOf(e.element),n="js-fv-".concat(e.field,"-").concat(i,"-").concat(Date.now(),"-message");e.messageElement.setAttribute("id",n),e.element.setAttribute("aria-describedby",n);var a=e.element.getAttribute("type");"radio"!==a&&"checkbox"!==a||t.forEach((function(e){return e.setAttribute("aria-describedby",n)}))}}]),i}(A),I=function(e){o(i,e);var t=f(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).addedFields=new Map,a.opts=Object.assign({},{html5Input:!1,pluginPrefix:"data-fvp-",prefix:"data-fv-"},e),a.fieldAddedHandler=a.onFieldAdded.bind(u(a)),a.fieldRemovedHandler=a.onFieldRemoved.bind(u(a)),a}return l(i,[{key:"install",value:function(){var e=this;this.parsePlugins();var t=this.parseOptions();Object.keys(t).forEach((function(i){e.addedFields.has(i)||e.addedFields.set(i,!0),e.core.addField(i,t[i])})),this.core.on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler)}},{key:"uninstall",value:function(){this.addedFields.clear(),this.core.off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler)}},{key:"onFieldAdded",value:function(e){var t=this,i=e.elements;i&&0!==i.length&&!this.addedFields.has(e.field)&&(this.addedFields.set(e.field,!0),i.forEach((function(i){var n=t.parseElement(i);if(!t.isEmptyOption(n)){var a={selector:e.options.selector,validators:Object.assign({},e.options.validators||{},n.validators)};t.core.setFieldOptions(e.field,a)}})))}},{key:"onFieldRemoved",value:function(e){e.field&&this.addedFields.has(e.field)&&this.addedFields.delete(e.field)}},{key:"parseOptions",value:function(){var e=this,t=this.opts.prefix,i={},n=this.core.getFields(),a=this.core.getFormElement();return[].slice.call(a.querySelectorAll("[name], [".concat(t,"field]"))).forEach((function(n){var a=e.parseElement(n);if(!e.isEmptyOption(a)){var l=n.getAttribute("name")||n.getAttribute("".concat(t,"field"));i[l]=Object.assign({},i[l],a)}})),Object.keys(i).forEach((function(e){Object.keys(i[e].validators).forEach((function(t){i[e].validators[t].enabled=i[e].validators[t].enabled||!1,n[e]&&n[e].validators&&n[e].validators[t]&&Object.assign(i[e].validators[t],n[e].validators[t])}))})),Object.assign({},n,i)}},{key:"createPluginInstance",value:function(e,t){for(var i=e.split("."),n=window||this,a=0,l=i.length;a<l;a++)n=n[i[a]];if("function"!=typeof n)throw new Error("the plugin ".concat(e," doesn't exist"));return new n(t)}},{key:"parsePlugins",value:function(){for(var e=this,t=this.core.getFormElement(),i=new RegExp("^".concat(this.opts.pluginPrefix,"([a-z0-9-]+)(___)*([a-z0-9-]+)*$")),n=t.attributes.length,a={},l=0;l<n;l++){var r=t.attributes[l].name,o=t.attributes[l].value,d=i.exec(r);if(d&&4===d.length){var c=this.toCamelCase(d[1]);a[c]=Object.assign({},d[3]?s({},this.toCamelCase(d[3]),o):{enabled:""===o||"true"===o},a[c])}}Object.keys(a).forEach((function(t){var i=a[t],n=i.enabled,l=i.class;if(n&&l){delete i.enabled,delete i.clazz;var r=e.createPluginInstance(l,i);e.core.registerPlugin(t,r)}}))}},{key:"isEmptyOption",value:function(e){var t=e.validators;return 0===Object.keys(t).length&&t.constructor===Object}},{key:"parseElement",value:function(e){for(var t=new RegExp("^".concat(this.opts.prefix,"([a-z0-9-]+)(___)*([a-z0-9-]+)*$")),i=e.attributes.length,n={},a=e.getAttribute("type"),l=0;l<i;l++){var r=e.attributes[l].name,o=e.attributes[l].value;if(this.opts.html5Input)switch(!0){case"minlength"===r:n.stringLength=Object.assign({},{enabled:!0,min:parseInt(o,10)},n.stringLength);break;case"maxlength"===r:n.stringLength=Object.assign({},{enabled:!0,max:parseInt(o,10)},n.stringLength);break;case"pattern"===r:n.regexp=Object.assign({},{enabled:!0,regexp:o},n.regexp);break;case"required"===r:n.notEmpty=Object.assign({},{enabled:!0},n.notEmpty);break;case"type"===r&&"color"===o:n.color=Object.assign({},{enabled:!0,type:"hex"},n.color);break;case"type"===r&&"email"===o:n.emailAddress=Object.assign({},{enabled:!0},n.emailAddress);break;case"type"===r&&"url"===o:n.uri=Object.assign({},{enabled:!0},n.uri);break;case"type"===r&&"range"===o:n.between=Object.assign({},{enabled:!0,max:parseFloat(e.getAttribute("max")),min:parseFloat(e.getAttribute("min"))},n.between);break;case"min"===r&&"date"!==a&&"range"!==a:n.greaterThan=Object.assign({},{enabled:!0,min:parseFloat(o)},n.greaterThan);break;case"max"===r&&"date"!==a&&"range"!==a:n.lessThan=Object.assign({},{enabled:!0,max:parseFloat(o)},n.lessThan)}var d=t.exec(r);if(d&&4===d.length){var c=this.toCamelCase(d[1]);n[c]=Object.assign({},d[3]?s({},this.toCamelCase(d[3]),this.normalizeValue(o)):{enabled:""===o||"true"===o},n[c])}}return{validators:n}}},{key:"normalizeValue",value:function(e){return"true"===e||"false"!==e&&e}},{key:"toUpperCase",value:function(e){return e.charAt(1).toUpperCase()}},{key:"toCamelCase",value:function(e){return e.replace(/-./g,this.toUpperCase)}}]),i}(A),C=function(e){o(i,e);var t=f(i);function i(){var e;return n(this,i),(e=t.call(this,{})).onValidHandler=e.onFormValid.bind(u(e)),e}return l(i,[{key:"install",value:function(){if(this.core.getFormElement().querySelectorAll('[type="submit"][name="submit"]').length)throw new Error("Do not use `submit` for the name attribute of submit button");this.core.on("core.form.valid",this.onValidHandler)}},{key:"uninstall",value:function(){this.core.off("core.form.valid",this.onValidHandler)}},{key:"onFormValid",value:function(){var e=this.core.getFormElement();e instanceof HTMLFormElement&&e.submit()}}]),i}(A),O=function(e){o(i,e);var t=f(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).opts=e||{},a.triggerExecutedHandler=a.onTriggerExecuted.bind(u(a)),a}return l(i,[{key:"install",value:function(){this.core.on("plugins.trigger.executed",this.triggerExecutedHandler)}},{key:"uninstall",value:function(){this.core.off("plugins.trigger.executed",this.triggerExecutedHandler)}},{key:"onTriggerExecuted",value:function(e){if(this.opts[e.field]){var t,i=v(this.opts[e.field].split(" "));try{for(i.s();!(t=i.n()).done;){var n=t.value.trim();this.opts[n]&&this.core.revalidateField(n)}}catch(e){i.e(e)}finally{i.f()}}}}]),i}(A),S=function(e){o(i,e);var t=f(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).opts=Object.assign({},{excluded:i.defaultIgnore},e),a.ignoreValidationFilter=a.ignoreValidation.bind(u(a)),a}return l(i,[{key:"install",value:function(){this.core.registerFilter("element-ignored",this.ignoreValidationFilter)}},{key:"uninstall",value:function(){this.core.deregisterFilter("element-ignored",this.ignoreValidationFilter)}},{key:"ignoreValidation",value:function(e,t,i){return this.opts.excluded.apply(this,[e,t,i])}}],[{key:"defaultIgnore",value:function(e,t,i){var n=!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length),a=t.getAttribute("disabled");return""===a||"disabled"===a||"hidden"===t.getAttribute("type")||!n}}]),i}(A),N=function(e){o(i,e);var t=f(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).statuses=new Map,a.opts=Object.assign({},{onStatusChanged:function(){}},e),a.elementValidatingHandler=a.onElementValidating.bind(u(a)),a.elementValidatedHandler=a.onElementValidated.bind(u(a)),a.elementNotValidatedHandler=a.onElementNotValidated.bind(u(a)),a.elementIgnoredHandler=a.onElementIgnored.bind(u(a)),a.fieldAddedHandler=a.onFieldAdded.bind(u(a)),a.fieldRemovedHandler=a.onFieldRemoved.bind(u(a)),a}return l(i,[{key:"install",value:function(){this.core.on("core.element.validating",this.elementValidatingHandler).on("core.element.validated",this.elementValidatedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("core.element.ignored",this.elementIgnoredHandler).on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler)}},{key:"uninstall",value:function(){this.statuses.clear(),this.core.off("core.element.validating",this.elementValidatingHandler).off("core.element.validated",this.elementValidatedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("core.element.ignored",this.elementIgnoredHandler).off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler)}},{key:"areFieldsValid",value:function(){return Array.from(this.statuses.values()).every((function(e){return"Valid"===e||"NotValidated"===e||"Ignored"===e}))}},{key:"getStatuses",value:function(){return this.statuses}},{key:"onFieldAdded",value:function(e){this.statuses.set(e.field,"NotValidated")}},{key:"onFieldRemoved",value:function(e){this.statuses.has(e.field)&&this.statuses.delete(e.field),this.opts.onStatusChanged(this.areFieldsValid())}},{key:"onElementValidating",value:function(e){this.statuses.set(e.field,"Validating"),this.opts.onStatusChanged(!1)}},{key:"onElementValidated",value:function(e){this.statuses.set(e.field,e.valid?"Valid":"Invalid"),e.valid?this.opts.onStatusChanged(this.areFieldsValid()):this.opts.onStatusChanged(!1)}},{key:"onElementNotValidated",value:function(e){this.statuses.set(e.field,"NotValidated"),this.opts.onStatusChanged(!1)}},{key:"onElementIgnored",value:function(e){this.statuses.set(e.field,"Ignored"),this.opts.onStatusChanged(this.areFieldsValid())}}]),i}(A);function j(e,t){var i=[],n=[];Object.keys(t).forEach((function(e){e&&(t[e]?i.push(e):n.push(e))})),n.forEach((function(t){return function(e,t){t.split(" ").forEach((function(t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}))}(e,t)})),i.forEach((function(t){return function(e,t){t.split(" ").forEach((function(t){e.classList?e.classList.add(t):" ".concat(e.className," ").indexOf(" ".concat(t," "))&&(e.className+=" ".concat(t))}))}(e,t)}))}function L(e,t){var i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return i?i.call(e,t):[].slice.call(e.parentElement.querySelectorAll(t)).indexOf(e)>=0}function P(e,t){for(var i=e;i&&!L(i,t);)i=i.parentElement;return i}var M=function(e){o(i,e);var t=f(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).useDefaultContainer=!1,a.messages=new Map,a.defaultContainer=document.createElement("div"),a.useDefaultContainer=!e||!e.container,a.opts=Object.assign({},{container:function(e,t){return a.defaultContainer}},e),a.elementIgnoredHandler=a.onElementIgnored.bind(u(a)),a.fieldAddedHandler=a.onFieldAdded.bind(u(a)),a.fieldRemovedHandler=a.onFieldRemoved.bind(u(a)),a.validatorValidatedHandler=a.onValidatorValidated.bind(u(a)),a.validatorNotValidatedHandler=a.onValidatorNotValidated.bind(u(a)),a}return l(i,[{key:"install",value:function(){this.useDefaultContainer&&this.core.getFormElement().appendChild(this.defaultContainer),this.core.on("core.element.ignored",this.elementIgnoredHandler).on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler).on("core.validator.validated",this.validatorValidatedHandler).on("core.validator.notvalidated",this.validatorNotValidatedHandler)}},{key:"uninstall",value:function(){this.useDefaultContainer&&this.core.getFormElement().removeChild(this.defaultContainer),this.messages.forEach((function(e){return e.parentNode.removeChild(e)})),this.messages.clear(),this.core.off("core.element.ignored",this.elementIgnoredHandler).off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler).off("core.validator.validated",this.validatorValidatedHandler).off("core.validator.notvalidated",this.validatorNotValidatedHandler)}},{key:"onFieldAdded",value:function(e){var t=this,i=e.elements;i&&(i.forEach((function(e){var i=t.messages.get(e);i&&(i.parentNode.removeChild(i),t.messages.delete(e))})),this.prepareFieldContainer(e.field,i))}},{key:"onFieldRemoved",value:function(e){var t=this;if(e.elements.length&&e.field){var i=e.elements[0].getAttribute("type");("radio"===i||"checkbox"===i?[e.elements[0]]:e.elements).forEach((function(e){if(t.messages.has(e)){var i=t.messages.get(e);i.parentNode.removeChild(i),t.messages.delete(e)}}))}}},{key:"prepareFieldContainer",value:function(e,t){var i=this;if(t.length){var n=t[0].getAttribute("type");"radio"===n||"checkbox"===n?this.prepareElementContainer(e,t[0],t):t.forEach((function(n){return i.prepareElementContainer(e,n,t)}))}}},{key:"prepareElementContainer",value:function(e,t,i){var n;if("string"==typeof this.opts.container){var a="#"===this.opts.container.charAt(0)?'[id="'.concat(this.opts.container.substring(1),'"]'):this.opts.container;n=this.core.getFormElement().querySelector(a)}else n=this.opts.container(e,t);var l=document.createElement("div");n.appendChild(l),j(l,{"fv-plugins-message-container":!0}),this.core.emit("plugins.message.placed",{element:t,elements:i,field:e,messageElement:l}),this.messages.set(t,l)}},{key:"getMessage",value:function(e){return"string"==typeof e.message?e.message:e.message[this.core.getLocale()]}},{key:"onValidatorValidated",value:function(e){var t=e.elements,i=e.element.getAttribute("type"),n=("radio"===i||"checkbox"===i)&&t.length>0?t[0]:e.element;if(this.messages.has(n)){var a=this.messages.get(n),l=a.querySelector('[data-field="'.concat(e.field,'"][data-validator="').concat(e.validator,'"]'));if(l||e.result.valid)l&&!e.result.valid?(l.innerHTML=this.getMessage(e.result),this.core.emit("plugins.message.displayed",{element:e.element,field:e.field,message:e.result.message,messageElement:l,meta:e.result.meta,validator:e.validator})):l&&e.result.valid&&a.removeChild(l);else{var r=document.createElement("div");r.innerHTML=this.getMessage(e.result),r.setAttribute("data-field",e.field),r.setAttribute("data-validator",e.validator),this.opts.clazz&&j(r,s({},this.opts.clazz,!0)),a.appendChild(r),this.core.emit("plugins.message.displayed",{element:e.element,field:e.field,message:e.result.message,messageElement:r,meta:e.result.meta,validator:e.validator})}}}},{key:"onValidatorNotValidated",value:function(e){var t=e.elements,i=e.element.getAttribute("type"),n="radio"===i||"checkbox"===i?t[0]:e.element;if(this.messages.has(n)){var a=this.messages.get(n),l=a.querySelector('[data-field="'.concat(e.field,'"][data-validator="').concat(e.validator,'"]'));l&&a.removeChild(l)}}},{key:"onElementIgnored",value:function(e){var t=e.elements,i=e.element.getAttribute("type"),n="radio"===i||"checkbox"===i?t[0]:e.element;if(this.messages.has(n)){var a=this.messages.get(n);[].slice.call(a.querySelectorAll('[data-field="'.concat(e.field,'"]'))).forEach((function(e){a.removeChild(e)}))}}}],[{key:"getClosestContainer",value:function(e,t,i){for(var n=e;n&&n!==t&&(n=n.parentElement,!i.test(n.className)););return n}}]),i}(A),R=function(e){o(i,e);var t=f(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).results=new Map,a.containers=new Map,a.MESSAGE_PLUGIN="___frameworkMessage",a.opts=Object.assign({},{defaultMessageContainer:!0,eleInvalidClass:"",eleValidClass:"",rowClasses:"",rowValidatingClass:""},e),a.elementIgnoredHandler=a.onElementIgnored.bind(u(a)),a.elementValidatingHandler=a.onElementValidating.bind(u(a)),a.elementValidatedHandler=a.onElementValidated.bind(u(a)),a.elementNotValidatedHandler=a.onElementNotValidated.bind(u(a)),a.iconPlacedHandler=a.onIconPlaced.bind(u(a)),a.fieldAddedHandler=a.onFieldAdded.bind(u(a)),a.fieldRemovedHandler=a.onFieldRemoved.bind(u(a)),a.messagePlacedHandler=a.onMessagePlaced.bind(u(a)),a}return l(i,[{key:"install",value:function(){var e,t=this;j(this.core.getFormElement(),(s(e={},this.opts.formClass,!0),s(e,"fv-plugins-framework",!0),e)),this.core.on("core.element.ignored",this.elementIgnoredHandler).on("core.element.validating",this.elementValidatingHandler).on("core.element.validated",this.elementValidatedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("plugins.icon.placed",this.iconPlacedHandler).on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler),this.opts.defaultMessageContainer&&(this.core.registerPlugin(this.MESSAGE_PLUGIN,new M({clazz:this.opts.messageClass,container:function(e,i){var n=P(i,"string"==typeof t.opts.rowSelector?t.opts.rowSelector:t.opts.rowSelector(e,i));return M.getClosestContainer(i,n,t.opts.rowPattern)}})),this.core.on("plugins.message.placed",this.messagePlacedHandler))}},{key:"uninstall",value:function(){var e;this.results.clear(),this.containers.clear(),j(this.core.getFormElement(),(s(e={},this.opts.formClass,!1),s(e,"fv-plugins-framework",!1),e)),this.core.off("core.element.ignored",this.elementIgnoredHandler).off("core.element.validating",this.elementValidatingHandler).off("core.element.validated",this.elementValidatedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("plugins.icon.placed",this.iconPlacedHandler).off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler),this.opts.defaultMessageContainer&&(this.core.deregisterPlugin(this.MESSAGE_PLUGIN),this.core.off("plugins.message.placed",this.messagePlacedHandler))}},{key:"onIconPlaced",value:function(e){}},{key:"onMessagePlaced",value:function(e){}},{key:"onFieldAdded",value:function(e){var t=this,i=e.elements;i&&(i.forEach((function(e){var i,n=t.containers.get(e);n&&(j(n,(s(i={},t.opts.rowInvalidClass,!1),s(i,t.opts.rowValidatingClass,!1),s(i,t.opts.rowValidClass,!1),s(i,"fv-plugins-icon-container",!1),i)),t.containers.delete(e))})),this.prepareFieldContainer(e.field,i))}},{key:"onFieldRemoved",value:function(e){var t=this;e.elements.forEach((function(e){var i,n=t.containers.get(e);n&&j(n,(s(i={},t.opts.rowInvalidClass,!1),s(i,t.opts.rowValidatingClass,!1),s(i,t.opts.rowValidClass,!1),i))}))}},{key:"prepareFieldContainer",value:function(e,t){var i=this;if(t.length){var n=t[0].getAttribute("type");"radio"===n||"checkbox"===n?this.prepareElementContainer(e,t[0]):t.forEach((function(t){return i.prepareElementContainer(e,t)}))}}},{key:"prepareElementContainer",value:function(e,t){var i,n=P(t,"string"==typeof this.opts.rowSelector?this.opts.rowSelector:this.opts.rowSelector(e,t));n!==t&&(j(n,(s(i={},this.opts.rowClasses,!0),s(i,"fv-plugins-icon-container",!0),i)),this.containers.set(t,n))}},{key:"onElementValidating",value:function(e){var t,i=e.elements,n=e.element.getAttribute("type"),a="radio"===n||"checkbox"===n?i[0]:e.element,l=this.containers.get(a);l&&j(l,(s(t={},this.opts.rowInvalidClass,!1),s(t,this.opts.rowValidatingClass,!0),s(t,this.opts.rowValidClass,!1),t))}},{key:"onElementNotValidated",value:function(e){this.removeClasses(e.element,e.elements)}},{key:"onElementIgnored",value:function(e){this.removeClasses(e.element,e.elements)}},{key:"removeClasses",value:function(e,t){var i=this,n=e.getAttribute("type"),a="radio"===n||"checkbox"===n?t[0]:e;t.forEach((function(e){var t;j(e,(s(t={},i.opts.eleValidClass,!1),s(t,i.opts.eleInvalidClass,!1),t))}));var l,r=this.containers.get(a);r&&j(r,(s(l={},this.opts.rowInvalidClass,!1),s(l,this.opts.rowValidatingClass,!1),s(l,this.opts.rowValidClass,!1),l))}},{key:"onElementValidated",value:function(e){var t=this,i=e.elements,n=e.element.getAttribute("type"),a="radio"===n||"checkbox"===n?i[0]:e.element;i.forEach((function(i){var n;j(i,(s(n={},t.opts.eleValidClass,e.valid),s(n,t.opts.eleInvalidClass,!e.valid),n))}));var l=this.containers.get(a);if(l)if(e.valid){this.results.delete(a);var r,o=!0;this.containers.forEach((function(e,i){e===l&&!1===t.results.get(i)&&(o=!1)})),o&&j(l,(s(r={},this.opts.rowInvalidClass,!1),s(r,this.opts.rowValidatingClass,!1),s(r,this.opts.rowValidClass,!0),r))}else{var d;this.results.set(a,!1),j(l,(s(d={},this.opts.rowInvalidClass,!0),s(d,this.opts.rowValidatingClass,!1),s(d,this.opts.rowValidClass,!1),d))}}}]),i}(A),T=function(e){o(i,e);var t=f(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).icons=new Map,a.opts=Object.assign({},{invalid:"fv-plugins-icon--invalid",onPlaced:function(){},onSet:function(){},valid:"fv-plugins-icon--valid",validating:"fv-plugins-icon--validating"},e),a.elementValidatingHandler=a.onElementValidating.bind(u(a)),a.elementValidatedHandler=a.onElementValidated.bind(u(a)),a.elementNotValidatedHandler=a.onElementNotValidated.bind(u(a)),a.elementIgnoredHandler=a.onElementIgnored.bind(u(a)),a.fieldAddedHandler=a.onFieldAdded.bind(u(a)),a}return l(i,[{key:"install",value:function(){this.core.on("core.element.validating",this.elementValidatingHandler).on("core.element.validated",this.elementValidatedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("core.element.ignored",this.elementIgnoredHandler).on("core.field.added",this.fieldAddedHandler)}},{key:"uninstall",value:function(){this.icons.forEach((function(e){return e.parentNode.removeChild(e)})),this.icons.clear(),this.core.off("core.element.validating",this.elementValidatingHandler).off("core.element.validated",this.elementValidatedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("core.element.ignored",this.elementIgnoredHandler).off("core.field.added",this.fieldAddedHandler)}},{key:"onFieldAdded",value:function(e){var t=this,i=e.elements;i&&(i.forEach((function(e){var i=t.icons.get(e);i&&(i.parentNode.removeChild(i),t.icons.delete(e))})),this.prepareFieldIcon(e.field,i))}},{key:"prepareFieldIcon",value:function(e,t){var i=this;if(t.length){var n=t[0].getAttribute("type");"radio"===n||"checkbox"===n?this.prepareElementIcon(e,t[0]):t.forEach((function(t){return i.prepareElementIcon(e,t)}))}}},{key:"prepareElementIcon",value:function(e,t){var i=document.createElement("i");i.setAttribute("data-field",e),t.parentNode.insertBefore(i,t.nextSibling),j(i,{"fv-plugins-icon":!0});var n={classes:{invalid:this.opts.invalid,valid:this.opts.valid,validating:this.opts.validating},element:t,field:e,iconElement:i};this.core.emit("plugins.icon.placed",n),this.opts.onPlaced(n),this.icons.set(t,i)}},{key:"onElementValidating",value:function(e){var t,i=this.setClasses(e.field,e.element,e.elements,(s(t={},this.opts.invalid,!1),s(t,this.opts.valid,!1),s(t,this.opts.validating,!0),t)),n={element:e.element,field:e.field,iconElement:i,status:"Validating"};this.core.emit("plugins.icon.set",n),this.opts.onSet(n)}},{key:"onElementValidated",value:function(e){var t,i=this.setClasses(e.field,e.element,e.elements,(s(t={},this.opts.invalid,!e.valid),s(t,this.opts.valid,e.valid),s(t,this.opts.validating,!1),t)),n={element:e.element,field:e.field,iconElement:i,status:e.valid?"Valid":"Invalid"};this.core.emit("plugins.icon.set",n),this.opts.onSet(n)}},{key:"onElementNotValidated",value:function(e){var t,i=this.setClasses(e.field,e.element,e.elements,(s(t={},this.opts.invalid,!1),s(t,this.opts.valid,!1),s(t,this.opts.validating,!1),t)),n={element:e.element,field:e.field,iconElement:i,status:"NotValidated"};this.core.emit("plugins.icon.set",n),this.opts.onSet(n)}},{key:"onElementIgnored",value:function(e){var t,i=this.setClasses(e.field,e.element,e.elements,(s(t={},this.opts.invalid,!1),s(t,this.opts.valid,!1),s(t,this.opts.validating,!1),t)),n={element:e.element,field:e.field,iconElement:i,status:"Ignored"};this.core.emit("plugins.icon.set",n),this.opts.onSet(n)}},{key:"setClasses",value:function(e,t,i,n){var a=t.getAttribute("type"),l="radio"===a||"checkbox"===a?i[0]:t;if(this.icons.has(l)){var r=this.icons.get(l);return j(r,n),r}return null}}]),i}(A),D=function(e){o(i,e);var t=f(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).invalidFields=new Map,a.opts=Object.assign({},{enabled:!0},e),a.validatorHandler=a.onValidatorValidated.bind(u(a)),a.shouldValidateFilter=a.shouldValidate.bind(u(a)),a.fieldAddedHandler=a.onFieldAdded.bind(u(a)),a.elementNotValidatedHandler=a.onElementNotValidated.bind(u(a)),a.elementValidatingHandler=a.onElementValidating.bind(u(a)),a}return l(i,[{key:"install",value:function(){this.core.on("core.validator.validated",this.validatorHandler).on("core.field.added",this.fieldAddedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("core.element.validating",this.elementValidatingHandler).registerFilter("field-should-validate",this.shouldValidateFilter)}},{key:"uninstall",value:function(){this.invalidFields.clear(),this.core.off("core.validator.validated",this.validatorHandler).off("core.field.added",this.fieldAddedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("core.element.validating",this.elementValidatingHandler).deregisterFilter("field-should-validate",this.shouldValidateFilter)}},{key:"shouldValidate",value:function(e,t,i,n){return!((!0===this.opts.enabled||!0===this.opts.enabled[e])&&this.invalidFields.has(t)&&this.invalidFields.get(t).length&&-1===this.invalidFields.get(t).indexOf(n))}},{key:"onValidatorValidated",value:function(e){var t=this.invalidFields.has(e.element)?this.invalidFields.get(e.element):[],i=t.indexOf(e.validator);e.result.valid&&i>=0?t.splice(i,1):e.result.valid||-1!==i||t.push(e.validator),this.invalidFields.set(e.element,t)}},{key:"onFieldAdded",value:function(e){e.elements&&this.clearInvalidFields(e.elements)}},{key:"onElementNotValidated",value:function(e){this.clearInvalidFields(e.elements)}},{key:"onElementValidating",value:function(e){this.clearInvalidFields(e.elements)}},{key:"clearInvalidFields",value:function(e){var t=this;e.forEach((function(e){return t.invalidFields.delete(e)}))}}]),i}(A),_=function(e){o(i,e);var t=f(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).isFormValid=!1,a.opts=Object.assign({},{aspNetButton:!1,buttons:function(e){return[].slice.call(e.querySelectorAll('[type="submit"]:not([formnovalidate])'))}},e),a.submitHandler=a.handleSubmitEvent.bind(u(a)),a.buttonClickHandler=a.handleClickEvent.bind(u(a)),a}return l(i,[{key:"install",value:function(){var e=this;if(this.core.getFormElement()instanceof HTMLFormElement){var t=this.core.getFormElement();this.submitButtons=this.opts.buttons(t),t.setAttribute("novalidate","novalidate"),t.addEventListener("submit",this.submitHandler),this.hiddenClickedEle=document.createElement("input"),this.hiddenClickedEle.setAttribute("type","hidden"),t.appendChild(this.hiddenClickedEle),this.submitButtons.forEach((function(t){t.addEventListener("click",e.buttonClickHandler)}))}}},{key:"uninstall",value:function(){var e=this,t=this.core.getFormElement();t instanceof HTMLFormElement&&t.removeEventListener("submit",this.submitHandler),this.submitButtons.forEach((function(t){t.removeEventListener("click",e.buttonClickHandler)})),this.hiddenClickedEle.parentElement.removeChild(this.hiddenClickedEle)}},{key:"handleSubmitEvent",value:function(e){this.validateForm(e)}},{key:"handleClickEvent",value:function(e){if(e.currentTarget instanceof HTMLElement)if(this.opts.aspNetButton&&!0===this.isFormValid);else{this.core.getFormElement().removeEventListener("submit",this.submitHandler),this.clickedButton=e.target;var t=this.clickedButton.getAttribute("name"),i=this.clickedButton.getAttribute("value");t&&i&&(this.hiddenClickedEle.setAttribute("name",t),this.hiddenClickedEle.setAttribute("value",i)),this.validateForm(e)}}},{key:"validateForm",value:function(e){var t=this;e.preventDefault(),this.core.validate().then((function(e){"Valid"===e&&t.opts.aspNetButton&&!t.isFormValid&&t.clickedButton&&(t.isFormValid=!0,t.clickedButton.removeEventListener("click",t.buttonClickHandler),t.clickedButton.click())}))}}]),i}(A),z=function(e){o(i,e);var t=f(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).messages=new Map,a.opts=Object.assign({},{placement:"top",trigger:"click"},e),a.iconPlacedHandler=a.onIconPlaced.bind(u(a)),a.validatorValidatedHandler=a.onValidatorValidated.bind(u(a)),a.elementValidatedHandler=a.onElementValidated.bind(u(a)),a.documentClickHandler=a.onDocumentClicked.bind(u(a)),a}return l(i,[{key:"install",value:function(){this.tip=document.createElement("div"),j(this.tip,s({"fv-plugins-tooltip":!0},"fv-plugins-tooltip--".concat(this.opts.placement),!0)),document.body.appendChild(this.tip),this.core.on("plugins.icon.placed",this.iconPlacedHandler).on("core.validator.validated",this.validatorValidatedHandler).on("core.element.validated",this.elementValidatedHandler),"click"===this.opts.trigger&&document.addEventListener("click",this.documentClickHandler)}},{key:"uninstall",value:function(){this.messages.clear(),document.body.removeChild(this.tip),this.core.off("plugins.icon.placed",this.iconPlacedHandler).off("core.validator.validated",this.validatorValidatedHandler).off("core.element.validated",this.elementValidatedHandler),"click"===this.opts.trigger&&document.removeEventListener("click",this.documentClickHandler)}},{key:"onIconPlaced",value:function(e){var t=this;j(e.iconElement,{"fv-plugins-tooltip-icon":!0}),"hover"===this.opts.trigger?(e.iconElement.addEventListener("mouseenter",(function(i){return t.show(e.element,i)})),e.iconElement.addEventListener("mouseleave",(function(e){return t.hide()}))):e.iconElement.addEventListener("click",(function(i){return t.show(e.element,i)}))}},{key:"onValidatorValidated",value:function(e){if(!e.result.valid){var t=e.elements,i=e.element.getAttribute("type"),n="radio"===i||"checkbox"===i?t[0]:e.element,a="string"==typeof e.result.message?e.result.message:e.result.message[this.core.getLocale()];this.messages.set(n,a)}}},{key:"onElementValidated",value:function(e){if(e.valid){var t=e.elements,i=e.element.getAttribute("type"),n="radio"===i||"checkbox"===i?t[0]:e.element;this.messages.delete(n)}}},{key:"onDocumentClicked",value:function(e){this.hide()}},{key:"show",value:function(e,t){if(t.preventDefault(),t.stopPropagation(),this.messages.has(e)){j(this.tip,{"fv-plugins-tooltip--hide":!1}),this.tip.innerHTML='<div class="fv-plugins-tooltip__content">'.concat(this.messages.get(e),"</div>");var i=t.target.getBoundingClientRect(),n=this.tip.getBoundingClientRect(),a=n.height,l=n.width,r=0,s=0;switch(this.opts.placement){case"bottom":r=i.top+i.height,s=i.left+i.width/2-l/2;break;case"bottom-left":r=i.top+i.height,s=i.left;break;case"bottom-right":r=i.top+i.height,s=i.left+i.width-l;break;case"left":r=i.top+i.height/2-a/2,s=i.left-l;break;case"right":r=i.top+i.height/2-a/2,s=i.left+i.width;break;case"top-left":r=i.top-a,s=i.left;break;case"top-right":r=i.top-a,s=i.left+i.width-l;break;default:r=i.top-a,s=i.left+i.width/2-l/2}r+=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,s+=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,this.tip.setAttribute("style","top: ".concat(r,"px; left: ").concat(s,"px"))}}},{key:"hide",value:function(){j(this.tip,{"fv-plugins-tooltip--hide":!0})}}]),i}(A),B=function(e){o(i,e);var t=f(i);function i(e){var a;n(this,i),(a=t.call(this,e)).handlers=[],a.timers=new Map;var l=document.createElement("div");return a.defaultEvent="oninput"in l?"input":"keyup",a.opts=Object.assign({},{delay:0,event:a.defaultEvent,threshold:0},e),a.fieldAddedHandler=a.onFieldAdded.bind(u(a)),a.fieldRemovedHandler=a.onFieldRemoved.bind(u(a)),a}return l(i,[{key:"install",value:function(){this.core.on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler)}},{key:"uninstall",value:function(){this.handlers.forEach((function(e){return e.element.removeEventListener(e.event,e.handler)})),this.handlers=[],this.timers.forEach((function(e){return window.clearTimeout(e)})),this.timers.clear(),this.core.off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler)}},{key:"prepareHandler",value:function(e,t){var i=this;t.forEach((function(t){var n=[];if(i.opts.event&&!1===i.opts.event[e])n=[];else if(i.opts.event&&i.opts.event[e]&&"function"!=typeof i.opts.event[e])n=i.opts.event[e].split(" ");else if("string"==typeof i.opts.event&&i.opts.event!==i.defaultEvent)n=i.opts.event.split(" ");else{var a=t.getAttribute("type"),l=t.tagName.toLowerCase();n=["radio"===a||"checkbox"===a||"file"===a||"select"===l?"change":i.ieVersion>=10&&t.getAttribute("placeholder")?"keyup":i.defaultEvent]}n.forEach((function(n){var a=function(n){return i.handleEvent(n,e,t)};i.handlers.push({element:t,event:n,field:e,handler:a}),t.addEventListener(n,a)}))}))}},{key:"handleEvent",value:function(e,t,i){var n=this;if(this.exceedThreshold(t,i)&&this.core.executeFilter("plugins-trigger-should-validate",!0,[t,i])){var a=function(){return n.core.validateElement(t,i).then((function(a){n.core.emit("plugins.trigger.executed",{element:i,event:e,field:t})}))},l=this.opts.delay[t]||this.opts.delay;if(0===l)a();else{var r=this.timers.get(i);r&&window.clearTimeout(r),this.timers.set(i,window.setTimeout(a,1e3*l))}}}},{key:"onFieldAdded",value:function(e){this.handlers.filter((function(t){return t.field===e.field})).forEach((function(e){return e.element.removeEventListener(e.event,e.handler)})),this.prepareHandler(e.field,e.elements)}},{key:"onFieldRemoved",value:function(e){this.handlers.filter((function(t){return t.field===e.field&&e.elements.indexOf(t.element)>=0})).forEach((function(e){return e.element.removeEventListener(e.event,e.handler)}))}},{key:"exceedThreshold",value:function(e,t){var i=0!==this.opts.threshold[e]&&0!==this.opts.threshold&&(this.opts.threshold[e]||this.opts.threshold);if(!i)return!0;var n=t.getAttribute("type");return-1!==["button","checkbox","file","hidden","image","radio","reset","submit"].indexOf(n)||this.core.getElementValue(e,t).length>=i}}]),i}(A),Y={Alias:w,Aria:H,Declarative:I,DefaultSubmit:C,Dependency:O,Excluded:S,FieldStatus:N,Framework:R,Icon:T,Message:M,Sequence:D,SubmitButton:_,Tooltip:z,Trigger:B},q={call:g,classSet:j,closest:P,fetch:k,format:p,hasClass:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )".concat(t,"( |$)"),"gi").test(e.className)},isValidDate:y};e.Plugin=A,e.algorithms=i,e.filters=x,e.formValidation=function(e,t){var i=Object.assign({},{fields:{},locale:"en_US",plugins:{},init:function(e){}},t),n=new F(e,i.fields);return n.setLocale(i.locale,i.localization),Object.keys(i.plugins).forEach((function(e){return n.registerPlugin(e,i.plugins[e])})),Object.keys(V).forEach((function(e){return n.registerValidator(e,V[e])})),i.init(n),Object.keys(i.fields).forEach((function(e){return n.addField(e,i.fields[e])})),n},e.locales={},e.plugins=Y,e.utils=q,e.validators=V,Object.defineProperty(e,"__esModule",{value:!0})},"object"===r(t)?l(t):(n=[t],void 0===(a="function"==typeof(i=l)?i.apply(t,n):i)||(e.exports=a))}},t={},function i(n){var a=t[n];if(void 0!==a)return a.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,i),l.exports}(10046);var e,t}));